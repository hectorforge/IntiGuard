@model IntiGuard.Models.Producto

@{
    ViewData["Title"] = "Detalle Producto";
}

<div class="container mt-4">
    <h2 class="fw-bold text-primary mb-4">Detalle del Producto</h2>

    <div class="row">
        <!-- Imagen -->
        <div class="col-md-5">
            <img src="@(!string.IsNullOrEmpty(Model.ImagenUrl) ? Url.Content(Model.ImagenUrl) : Url.Content("~/images/no-image.png"))"
                 alt="@Model.NombreProducto"
                 class="img-fluid rounded shadow-sm product-detail-img" />
        </div>

        <!-- Información -->
        <div class="col-md-7">
            <h3 class="fw-bold">@Model.NombreProducto</h3>
            <p class="text-muted">@Model.Marca</p>
            <p>@Model.Descripcion</p>
            <p class="fw-bold text-primary fs-4">@Model.Precio.ToString("C")</p>

            @if (User.IsInRole("ADMIN"))
            {
                <p class="text-muted">Stock disponible: @Model.Stock</p>
            }

            <div class="mt-3">
                @if (User.IsInRole("ADMIN"))
                {
                    <a asp-action="Edit" asp-route-id="@Model.IdProducto" class="btn btn-warning me-2">
                        <i class="bi bi-pencil"></i> Editar
                    </a>
                    <a asp-action="Delete" asp-route-id="@Model.IdProducto" class="btn btn-danger">
                        <i class="bi bi-trash"></i> Eliminar
                    </a>
                }
                else if (User.Identity.IsAuthenticated && User.IsInRole("USER"))
                {
                    <!-- Agregar al carrito -->
                    <form asp-controller="Venta" asp-action="AgregarAlCarrito" method="post" class="d-inline">
                        <input type="hidden" name="idProducto" value="@Model.IdProducto" />
                        <input type="hidden" name="cantidad" value="1" />
                        <button type="submit" class="btn btn-success">
                            <i class="bi bi-cart-plus"></i> Comprar
                        </button>
                    </form>
                }
                else
                {
                    <!-- Si no está logueado -->
                    <a asp-controller="Account" asp-action="Login" class="btn btn-primary">
                        <i class="bi bi-box-arrow-in-right"></i> Comprar
                    </a>
                }

                <a asp-action="Index" class="btn btn-outline-secondary ms-2">Volver</a>
            </div>
        </div>
    </div>
</div>

<!-- CSS adicional -->
<style>
    .product-detail-img {
        max-height: 350px;
        object-fit: cover;
        transition: transform 0.3s ease-in-out;
    }

        .product-detail-img:hover {
            transform: scale(1.05);
        }
</style>
